# CCIP Cross Chain Name Service - Hardhat Test

This repository contains a test suite written in TypeScript using the Hardhat framework. The test focuses on the **CCIP Cross Chain Name Service** (CCNS) implemented using Chainlink's CCIPLocalSimulator. The test simulates registering a name on a source blockchain and verifying that the name resolves to the correct address on both the source and destination blockchains.

## Overview

### Test Contracts

- **CCIPLocalSimulator:** A local simulator provided by Chainlink to test Cross-Chain Interactions.
- **CrossChainNameServiceRegister:** Handles the registration of names on the source chain.
- **CrossChainNameServiceLookup:** Provides lookup functionality to resolve registered names to addresses.
- **CrossChainNameServiceReceiver:** Receives cross-chain messages and handles name resolution on the destination chain.

### Test Scenario

1. **Setup Phase:**

   - Deploy the `CCIPLocalSimulator` contract.
   - Deploy `CrossChainNameServiceRegister` and `CrossChainNameServiceLookup` on the source chain.
   - Deploy `CrossChainNameServiceReceiver` and `CrossChainNameServiceLookup` on the destination chain.
   - Configure the contracts to enable cross-chain communication.

2. **Testing Phase:**
   - **Register a Name:** Register the name `"alice.ccns"` to the address `alice` on the source chain.
   - **Lookup Name:** Retrieve the registered address for `"alice.ccns"` on both the source and destination chains.
   - **Assertions:** Verify that the address retrieved from both chains matches `alice`'s address.

### Key Functions

- **before:** Initializes the test environment by deploying contracts and setting up cross-chain communication.
- **it - "Should register alice.ccns on the source chain and verify her address on both chains":** Tests the registration and lookup of a name across the source and destination chains.

## How to Run the Tests

1. **Install Hardhat:**
   Follow the [Hardhat installation guide](https://hardhat.org/getting-started/) to set up Hardhat on your system.

2. **Clone the Repository:**

   ```bash
   git clone https://github.com/Shiva-Sai-ssb/CCIP-crossChain-nameService.git
   cd CCIP-crossChain-nameService && cd hardhat
   ```

3. **Install Dependencies:**

   ```bash
   npm install
   ```

4. **Compile Contracts:**

   ```bash
   npx hardhat compile
   ```

5. **Run the Tests:**

   ```bash
   npx hardhat test --network hardhat
   ```

   This will execute the test file and display the output, including the logs generated by `console.log` statements.

## Test Logs

The test output includes the following key logs:

- Alice's address on the source chain.
- Deployment addresses of the CCIPLocalSimulator, CrossChainNameServiceRegister, and CrossChainNameServiceLookup contracts.
- Chain selector and router addresses.
- Confirmation of successful registration of `"alice.ccns"`.
- Results of the name lookup on both source and destination chains.

## Test Output

The following is the test output from running the Hardhat test:

```c++
shiva-sai@ssb:hardhat$ npx hardhat test --network hardhat


  CCIP Cross Chain Name Service - Register and Lookup Alice
Alice's address:  0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
CCIP Local simulator address:  0x5FbDB2315678afecb367f032d93F642f64180aa3
Source Lookup contract address:  0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512
Source Register contract address:  0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0
Destination Lookup contract address:  0xCf7Ed3AccA5a467e9e704C703E8D87F634fB0Fc9
Receiver contract address:  0xDc64a140Aa3E981100a9becA4E685f962f0cF6C9
Registered Alice with 'alice.ccns' on source chain
Source chain lookup address:  0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
Destination chain lookup address:  0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266
    âœ” Should register alice.ccns on the source chain and verify her address on both chains


  1 passing (2s)
```

This detailed output shows the steps taken during the test execution, including the deployment of contracts, configuration of cross-chain communication, and the successful registration and lookup of the `alice.ccns` name on both the source and destination chains.
